using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class InvulnerabilityBar : MonoBehaviour
{
    public Slider slider;
    //public Invulnerability invulnerability;

    public bool stopTimer = false;
    public float timerStart = 0f;

    public void SetMaxInvulnerability(float inv)
    {
        slider.maxValue = inv;
        slider.value = inv;
    }

    public void GetHit()
    {
        slider.value = slider.minValue;
    }

    public void Regenerate(float inv)
    {
        StartCoroutine(StartTimer(inv));
    }

    IEnumerator StartTimer(float inv)
    {
        
        while (stopTimer == false)
        {
            timerStart += Time.deltaTime;
            yield return new WaitForSeconds(0.001f);

            if(inv <= timerStart)
            {
                stopTimer = true;
            }

            if (stopTimer == false)
            {
                slider.value = timerStart;
            }
        }
    }

    public void resetStopTimer()
    {
        timerStart = 0f;
        stopTimer = false;
    }
}
